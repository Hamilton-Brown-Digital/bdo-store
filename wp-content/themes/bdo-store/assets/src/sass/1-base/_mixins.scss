// standard clearfix
@mixin clearfix {
  &::before,
  &::after {
    content: ' ';
    display: table;
  }

  &::after {
    clear: both;
  }

  & {
    *zoom: 1;
  }
}

// aspect ratio mixin
@mixin aspect-ratio($arglist...) {
  $map: keywords($arglist);
  $height: map-get($map, height) or nth-or-null($arglist, 2);
  $width: map-get($map, width) or nth-or-null($arglist, 1);
  $ratio: map-get($map, ratio) or if($width and $height, $width/$height, nth-or-null($arglist, 1)) or 1;
  $padding: 1 / $ratio * 100%;

  &::before {
    content: '';
    position: relative;
    display: block;
    padding-bottom: $padding;
  }

  &::after {
    content: '';
    display: table;
  }
}

// Helper function
// Return null rather than throwing an error if index is outside list range.
@function nth-or-null($list, $index) {
  @return if(length($list) >= $index, nth($list, $index), null);
}

// remove default styles in iOS.
@mixin remove-webkit-defaults {
  border-radius: 0;
  appearance: none;
}

@function calculateRem($size) {
  $remSize: $size / 16;
  @return #{$remSize}rem;
}

// USAGE: @include font-size(12);
@mixin font-size($size) {
  font-size: calculateRem($size);
}

// USAGE: @include stagger-transition-delay(10, 0.5s, 0.1s);
@mixin stagger-transition-delay($i, $initial-delay, $stagger-delay) {
  @while $i > 0 {
    &:nth-child(#{$i}) {
      transition-delay: $initial-delay + $stagger-delay * $i;
    }

    $i: $i - 1;
  }
}

// USAGE: @include hocus {color: red;}
@mixin hocus {
  &:hover,
  &:focus {
    @content;
  }
}


@mixin text-format {
  h2, h3, h4, h5, p, ul, ol, hr{
    margin-bottom:1.5rem;
  }
  h2{
    @include header-regular($underline: true);
  }
  p{
    margin-bottom: 1em;
  }
  a{
    color: $brand-red;
    text-decoration: underline;
  }
  p, a, li{
    @include font-size(19);
  }

  a:active {
    border-bottom: 1px solid $color-text-link;
  }

  a:focus {
    border-bottom: 1px solid $color-text-link;
  }

  a:visited {
    border-bottom: 1px solid $color-text-link;
  }

  hr {
    border-top-color: $color-line;
  }

  ol,
  ul {
    list-style-position: inside;
  }

  ul {
    li {
      position: relative;
      display: flex;
      align-items: center;
      margin-bottom: 0.4em;
      list-style: none;
      line-height: 1.4;
      &:before {
        flex-grow: 0;
        width: 5px;
        height: 5px;
        margin-right: 0.5em;
        background-color: $color-text-link;
        content: '';
      }
    }
  }

  ol {
    list-style: none;
    counter-reset: li;
    li {
      counter-increment: item;
      position: relative;
      display: flex;
      align-items: center;
      margin-bottom: 0.4em;
      list-style: none;
      line-height: 1.4;
      &:before {
        margin-right: 10px;
        border-radius: 100%;
        color: $color-text-link;
        content: counter(item) '. ';
      }
    }
  }
}




// Typography mixins

@mixin font-bold{
  font-family:$font-bold, $font-secondary;
}
@mixin font-display{
  font-family:$font-bold, $font-secondary;
}
@mixin text-tiny{
  @include font-size(14);
  line-height: 1.4;
}
@mixin text-small{
  @include font-size(16);
  line-height: 1.4;
}
@mixin text-side-nav{
  @include font-size(20);
  display: block;
  padding:0.5rem;
  padding-left: 0;
  color:$color-text;
  line-height: 1.4;
  text-decoration: none;
  &:hover{
    color:$brand-red;
  }
}

// Underline under headings

@mixin underline{
  display: block;
  width: 72px;
  height: 6px;
  margin: clamp(1rem, 1.5em, 3rem) 0;
  padding:0;
  background-color:$brand-red;
  border:none;
  @include breakpoint($break-desktop){
    width: 220px;
    height: 8px;
  }
}
@mixin underline-small{
  display: block;
  width: 72px;
  height: 6px;
  margin: clamp(1rem, 1.5em, 3rem) 0;
  padding:0;
  background-color:$brand-red;
  border:none;
}

// Huge section headings
@mixin header-section($underline: false){
  @include font-bold;
  @include font-size(20);
  margin-top: 0;
  @include breakpoint($break-mobile){
    @include font-size(30);
  }
  @include breakpoint($break-tablet){
    @include font-size(40);
  }
  @include breakpoint($break-desktop){
    @include font-size(60);
  }
  @if $underline {
    &:after{
      content: '';
      @include underline;
    }
  }
}
// Regular headings
@mixin header-regular($underline: false, $stumpyunderline: false){
  @include font-bold;
  @include font-size(30);
  @include breakpoint($break-desktop){
    @include font-size(50);
  }
  @if $underline {
    &:after{
      content: '';
      @include underline;
    }
  }
  @if $stumpyunderline{
    &:after{
      @include underline;
      max-width: 86px;
    }
  }
}

// Small headings
@mixin header-small($underline: false){
  @include font-bold;
  @include font-size(20);
  @include breakpoint($break-tablet){
    @include font-size(20);
  }
  @include breakpoint($break-desktop-wide){
    @include font-size(24);
  }
  @if $underline {
    &:after{
      content: '';
      @include underline-small;
    }
  }
}

// tagline above headings
@mixin header-tagline{
  color: $brand-red;
  text-transform: uppercase;
  @include font-size(14);
  @include breakpoint($break-tablet){
    @include font-size(16);
  }
}

// intros
@mixin intro-text{
  @include font-size(24);
  line-height: 1.2;
  @include font-bold;
}


@mixin image-with-focus {
  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  &--left-top {
    img {
      object-position: left top;
    }
  }

  &--center-top {
    img {
      object-position: center top;
    }
  }

  &--right-top {
    img {
      object-position: right top;
    }
  }

  &--left-center {
    img {
      object-position: left center;
    }
  }

  &--center-center {
    img {
      object-position: center center;
    }
  }

  &--right-center {
    img {
      object-position: right center;
    }
  }

  &--left-bottom {
    img {
      object-position: left bottom;
    }
  }

  &--center-bottom {
    img {
      object-position: center bottom;
    }
  }

  &--right-bottom {
    img {
      object-position: right bottom;
    }
  }
}

// Flex

@mixin flex {
  display: flex;
  align-items: center;
  justify-content:flex-start;
}
@mixin flex-top{
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  justify-content:flex-start;
}
@mixin flex-bottom{
  display: flex;
  flex-direction: row;
  align-items: flex-end;
  justify-content:flex-start;
}
@mixin flex-stretch{
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content:flex-start;
}
@mixin flex-center{
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content:center;
}
@mixin flex-column{
  display: flex;
  flex-direction: column;
}



// set colors

@mixin page-color($rule){
  .theme-color--orange &{
    #{$rule}: $brand-gold;
  }
  .theme-color--blue &{
    #{$rule}: $brand-ocean;
  }
  .theme-color--green &{
    #{$rule}: $brand-emerald;
  }
}



// button

@mixin buttondefaults{
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 44px;
  padding: 0 2em;
  background-color: $brand-red;
  border-radius: 2px;
  color: $white;
  text-align: center;
  text-decoration: none;
  white-space: nowrap;
  cursor:pointer;
  @include font-size(16);
  @include font-bold;
  @include page-color('background');
  &:after{
    position: absolute;
    top:0;
    left: 0;
    display: block;
    width:100%;
    height: 100%;
    background-color: rgba($black, 0);
    transition: background-color 0.3s;
    content: '';
  }
  &:hover{
    &:after{
      background-color: rgba($black, 0.1);
    }
  }
  span {
    @include font-bold;
    z-index: 1;
  }
  svg {
    path {
      transition: all 300ms;
      fill: $white;
    }

    @include breakpoint($break-tablet) {
      width: 16px;
      height: 18px;
    }
  }
}

@mixin button-outline{
  background-color:transparent;
  border:solid 2px $color-line-dark;
  color:$color-text;
  &:hover{
    background-color: $color-line-dark;
    color:$white;
  }
}
@mixin button-outline-inverse{
  background-color:transparent;
  border:solid 3px $white;
  color:$white;
  &:hover{
    background-color: $white;
    color:$color-text;
  }
}


// form mixins

@mixin form-container{
  width:100%;
  max-width:756px;
}

@mixin form-label{
  display: block;
  @include font-size(16);
  width: 100%;
  margin-bottom:0.5em;
  @include font-bold;
  @include breakpoint($break-desktop-wide) {
    @include font-size(18);
  }
}

// for text input
@mixin form-input-text{
  width: 100%;
  margin-bottom: 1.5rem;
  padding: 0.6em;
  background-color: $white;
  border: $borderline;
  font-size:16px;
  @include breakpoint($break-desktop-wide) {
    margin-bottom: 1.5rem;
  }
}
@mixin form-input-text--inline{
  width: 100%;
  padding: 0.6em;
  background-color: $white;
  border: $borderline;
  font-size:16px;
}

@mixin form-input-textarea{
  width: 100%;
  height: 12em;
  padding: 0.6em;
  background-color: $white;
  border: $borderline;
  font-size:16px;
  @include breakpoint($break-desktop-wide) {
    margin-bottom: 1.5rem;
  }
}

@mixin form-dropdown{
  position: relative;
  width: 100%;
  width: 100%;
  padding: 0;
  padding:0.8em;
  background-color:$white;
  background-image:url('#{$image-path}/icons/arrow-down.svg');
  background-repeat: no-repeat;
  background-position: center right 0.6em;
  border: $borderline;
  color: unset;
  font-size:16px;
  cursor: pointer;
  @include page-color(border-bottom-color);
  .theme-color--orange &{
    background-image:url('#{$image-path}/icons/arrow-down-orange.svg');
  }
  .theme-color--blue &{
    background-image:url('#{$image-path}/icons/arrow-down-blue.svg');
  }
  .theme-color--green &{
    background-image:url('#{$image-path}/icons/arrow-down-green.svg');
  }
  option{
    display: block;
    font-family: $font-primary;
  }
}

@mixin form-submit{
  @include buttondefaults;
  margin-left: auto;
  &:after{
    display: none;
  }
  &:hover{
    background-color: darken($brand-red, 5%);
  }
}


@mixin bordered-box{
  padding:3rem;
  border: 2px solid $color-line;
  .background--gray &{
    border-color:$color-line-darker;
  }
}
@mixin bordered-box--small{
  padding:1.5rem;
  border: 2px solid $color-line;
  .background--gray &{
    border-color:$color-line-darker;
  }
}